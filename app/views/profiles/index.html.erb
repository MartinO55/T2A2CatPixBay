<p id="notice"><%= notice %></p>

<h1>Profiles</h1> <%# Lists all the profiles - Admin Only%>

<table class ="table table-hover table-bordered">
  <thead class="table-light">
    <tr>
      <th>Username</th>
      <th>ID number</th>
      <th>email</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @profiles.each do |profile| %>
      <tr>
      
        <td><%= profile.username %></td>
        <td><%= profile.user.id %></td>
        <td><%= profile.user.email %></td>
        <td><%= link_to 'Show', profile %></td>
        
        <% if policy(profile).edit?%>
        <td><%= link_to 'Edit', edit_profile_path(profile) %></td>
        <% else %>
          &nbsp
          <%end%>
         <% if policy(profile).edit?%>
        <td><%= link_to 'Delete', profile, method: :delete, data: { confirm: 'Are you sure?' } %></td><%# doesn't work needs a route path%>
          <% else %>
          &nbsp
          <%end%>
      
      </tr>
    <% end %>
  </tbody>
</table>

<br>


<%= link_to 'New Profile', new_profile_path, class:"btn btn-secondary"  %>

<%= link_to 'Show', @profile , class:"btn btn-secondary" %>